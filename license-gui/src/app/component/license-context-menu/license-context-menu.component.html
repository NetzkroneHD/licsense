@let currentItem = this.item();
@if (isRootNode()) {
    <button mat-button [matMenuTriggerFor]="menu" (click)="emitClick(currentItem.id)" [disabled]="currentItem.disabled ? true : null">

        @if (currentItem.icon) {
            <mat-icon>{{ currentItem.icon }}</mat-icon>
        }
        @if (currentItem.title) {
            {{ currentItem.title }}
        }
    </button>
} @else {
    <button mat-menu-item [matMenuTriggerFor]="menu" (click)="emitClick(currentItem.id)" [disabled]="currentItem.disabled ? true : null">
        @if (currentItem.icon) {
            <mat-icon>{{ currentItem.icon }}</mat-icon>
        }
        @if (currentItem.title) {
            {{ currentItem.title }}
        }
    </button>
}

<mat-menu #menu="matMenu">
    @for (subItem of this.item().entries; track subItem) {
        <button mat-menu-item (click)="emitClick(subItem.id)" [disabled]="subItem.disabled ? true : null">
            @if (subItem.entries && subItem.entries.length > 0) {
                <license-context-menu [item]="subItem" (onItemClick)="this.emitClick($event)"/>
            } @else {
                <button mat-menu-item (click)="emitClick(subItem.id)" [disabled]="subItem.disabled ? true:null">
                    @if (subItem.icon) {
                        <mat-icon>{{ subItem.icon }}</mat-icon>
                    }
                    @if (subItem.title) {
                        {{ subItem.title }}
                    }
                </button>
            }
        </button>
    }
</mat-menu>
