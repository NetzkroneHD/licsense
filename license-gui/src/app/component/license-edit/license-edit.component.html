<ng-container>
    <div [cdkTrapFocus]="true" class="dialog">
        <div cdkDrag cdkDragHandle cdkDragRootElement=".cdk-overlay-pane" class="license-drag-area license-text"
             mat-dialog-title>{{ licenseEdit.dialog.title }}
        </div>

        <mat-dialog-content>
            <mat-form-field #licenseKey class="license-form-field">
                <mat-label>{{ 'component.license-edit.license-key' | translate }}</mat-label>
                <input [disabled]="true" [ngModel]="(String(licenseEdit.licenseKey))" matInput>
                <mat-hint>{{ 'component.license-edit.generated-value' | translate }}</mat-hint>
            </mat-form-field>

            <mat-form-field #publisher class="license-form-field">
                <mat-label>{{ 'component.license-edit.publisher' | translate }}</mat-label>
                <input [disabled]="true" [ngModel]="(String(licenseEdit.publisher))" matInput>
                <mat-hint>{{ 'component.license-edit.generated-value' | translate }}</mat-hint>
            </mat-form-field>

            <mat-form-field #notes class="license-form-field">
                <mat-label>{{ 'component.license-edit.notes' | translate }}</mat-label>
                <input [(ngModel)]="licenseEdit.notes" matInput>
            </mat-form-field>

            <mat-slide-toggle #valid [(ngModel)]="licenseEdit.valid" class="no-select">
                @if (licenseEdit.valid) {
                    {{ 'component.license-edit.valid' | translate }}
                } @else {
                    {{ 'component.license-edit.invalid' | translate }}
                }
            </mat-slide-toggle>

            <div class="license-spacer"></div>

            <license-date-single-picker #validUntil
                                        [dateFormControl]="dateFormControl"
                                        [datePicker]="{label: 'component.license-edit.valid-until' | translate, hint: environment.momentDateAdapter.display.dateInput, placeholder: 'component.license-edit.start-date' | translate}"
                                        class="license-form-field"

            >

            </license-date-single-picker>

            {{ 'component.license-edit.list-mode' | translate }}:

            <mat-radio-group [(ngModel)]="licenseEdit.listMode" aria-label="Select an option">
                <mat-radio-button [value]="ListModeDto.Blacklist"
                                  class="no-select license-radio-button">{{ ListModeDto.Blacklist }}
                </mat-radio-button>
                <mat-radio-button [value]="ListModeDto.Whitelist"
                                  class="no-select license-radio-button">{{ ListModeDto.Whitelist }}
                </mat-radio-button>
            </mat-radio-group>

            <div class="license-spacer"></div>

            <mat-form-field #ipAddresses class="license-form-field">
                <mat-label>{{ 'component.license-edit.ip-addresses' | translate }}</mat-label>
                <mat-chip-grid #chipGrid aria-label="Enter ip addresses">
                    @for (ip of licenseEdit.ipAddresses; track ip) {
                        <mat-chip-row
                            (removed)="removeIp(ip)"
                            [editable]="true"
                            (edited)="editIp(ip, $event)"
                            [aria-description]="'press enter to edit ' + ip">
                            {{ ip }}
                            <button matChipRemove [attr.aria-label]="'remove ' + ip">
                                <mat-icon>cancel</mat-icon>
                            </button>
                        </mat-chip-row>
                    }

                    <input (matChipInputTokenEnd)="addIp($event)"
                           [matChipInputAddOnBlur]="true"
                           [matChipInputFor]="chipGrid"
                           [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                           [placeholder]="('component.license-edit.new-ip-address' | translate)"/>

                </mat-chip-grid>
            </mat-form-field>


        </mat-dialog-content>

        <mat-dialog-actions align="end">
            <button [mat-dialog-close]="{licenseEdit: licenseEdit, confirmAction: false, changes: changes}" class="cancel-button" color="secondary"
                    mat-raised-button>
                {{ licenseEdit.dialog.cancelCaption }}
            </button>

            <button [disabled]="!formControlGroup.valid" [mat-dialog-close]="{licenseEdit: licenseEdit, confirmAction: true, changes: changes}" class="accept-button"
                    color="primary"
                    mat-flat-button>
                {{ licenseEdit.dialog.confirmCaption }}
            </button>
        </mat-dialog-actions>
    </div>
</ng-container>
