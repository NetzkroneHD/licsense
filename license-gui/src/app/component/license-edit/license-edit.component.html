<ng-container>
  <div class="dialog" [cdkTrapFocus]="true">
    <div mat-dialog-title cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle
         class="license-drag-area license-text">{{ licenseEdit.dialog.title }}
    </div>

    <mat-dialog-content>
      <mat-form-field class="license-form-field" #licenseKey>
        <mat-label>{{ 'License Key' | translate }}</mat-label>
        <input matInput [disabled]="true" [ngModel]="(String(licenseEdit.licenseKey))">
        <mat-hint>{{ 'Generated value' | translate }}</mat-hint>
      </mat-form-field>

      <mat-form-field class="license-form-field" #publisher>
        <mat-label>{{ 'Publisher' | translate }}</mat-label>
        <input matInput [disabled]="true" [ngModel]="(String(licenseEdit.publisher))">
        <mat-hint>{{ 'Generated value' | translate }}</mat-hint>
      </mat-form-field>

      <mat-form-field class="license-form-field" #notes>
        <mat-label>{{ 'Notes' | translate }}</mat-label>
        <input matInput [(ngModel)]="licenseEdit.notes">
      </mat-form-field>

      <mat-slide-toggle class="no-select" [(ngModel)]="licenseEdit.valid" #valid>
        @if (licenseEdit.valid) {
          {{ 'Valid' | translate }}
        } @else {
          {{ 'Invalid' | translate }}
        }
      </mat-slide-toggle>

      <div class="license-spacer"></div>

      <license-date-single-picker #validUntil
                                  class="license-form-field"
                                  [datePicker]="{label: 'Valid Until' | translate, hint: environment.momentDateAdapter.display.dateInput, placeholder: 'Start Date' | translate}"
                                  [dateFormControl]="dateFormControl"

      >

      </license-date-single-picker>

      {{ 'List-Mode' | translate }}:

      <mat-radio-group aria-label="Select an option" [(ngModel)]="licenseEdit.listMode">
        <mat-radio-button [value]="ListModeDto.Blacklist"
                          class="no-select license-radio-button">{{ ListModeDto.Blacklist }}
        </mat-radio-button>
        <mat-radio-button [value]="ListModeDto.Whitelist"
                          class="no-select license-radio-button">{{ ListModeDto.Whitelist }}
        </mat-radio-button>
      </mat-radio-group>

      <div class="license-spacer"></div>

      <mat-form-field class="license-form-field" #ipAddresses>
        <mat-label>{{'IP-Addresses' | translate}}</mat-label>
        <mat-chip-grid #chipGrid aria-label="Enter ip addresses">
          @for (ip of licenseEdit.ipAddresses; track ip) {
            <mat-chip-row
              (removed)="removeIp(ip)"
              [editable]="true"
              (edited)="editIp(ip, $event)"
              [aria-description]="'press enter to edit ' + ip">
              {{ ip }}
              <button matChipRemove [attr.aria-label]="'remove ' + ip">
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-chip-row>
          }

          <input [placeholder]="('New IP-Address separated by comma' | translate)"
                 [matChipInputFor]="chipGrid"
                 [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                 [matChipInputAddOnBlur]="true"
                 (matChipInputTokenEnd)="addIp($event)"/>

        </mat-chip-grid>
      </mat-form-field>


    </mat-dialog-content>

    <mat-dialog-actions align="end">
      <button mat-raised-button class="cancel-button" color="secondary"
              [mat-dialog-close]="{licenseEdit: licenseEdit, confirmAction: false, changes: changes}">
        {{ licenseEdit.dialog.cancelCaption }}
      </button>

      <button mat-raised-button class="accept-button" color="primary"
              [mat-dialog-close]="{licenseEdit: licenseEdit, confirmAction: true, changes: changes}" [disabled]="!formControlGroup.valid">
        {{ licenseEdit.dialog.confirmCaption }}
      </button>
    </mat-dialog-actions>
  </div>
</ng-container>
